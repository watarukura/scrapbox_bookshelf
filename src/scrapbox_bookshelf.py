import requests
import json
import re

PROJECT_NAME = "handslab-bookshelf"
ISBNs = [
    "9784797361193",
    "9784839951160",
    "9784774156163",
    "9784274065972",
    "9784774156545",
    "9784873116655",
    "9784798116839",
    "9784863541467",
    "9784798119878",
    "9784822285241",
    "9784873117249",
    "9784873117034",
    "9784822249472",
    "9784797382570",
    "9784873116303",
    "9784822262969",
    "9784756245083",
    "9784416114377",
    "9784863541177",
    "9784048702270",
    "9784774148915",
    "9784274066306",
    "9784621066089",
    "9784048687461",
    "9784862671073",
    "9784887522602",
    "9784844364023",
    "9784883353101",
    "9784844363101",
    "9784048917353",
    "9784274068560",
    "9784774158655",
    "4910077430241",
    "9784756243836",
    "9784822281861",
    "9784416113158",
    "9784844364030",
    "9784774141756",
    "9784839940171",
    "9784798016016",
    "9784881356968",
    "9784774136844",
    "9784844363989",
    "9784798130569",
    "9784844362227",
    "9784774155944",
    "9784322121223",
    "9784798125091",
    "9784798121628",
    "9784774154077",
    "9784534051943",
    "9784862670649",
    "9784844329800",
    "9784839928407",
    "9784788503625",
    "9784534038951",
    "9784774153742",
    "9784774135113",
    "9784873112565",
    "9784774142135",
    "9784789840873",
    "9784774146751",
    "9784774127019",
    "9784532316587",
    "9784822274177",
    "9784894515802",
    "9784413110747",
    "9784822262570",
    "9784839941932",
    "9784799313282",
    "9784822246846",
    "9784822249052",
    "9784822284336",
    "9784844371960",
    "9784492532706",
    "9784496047800",
    "9784478420416",
    "9784822230340",
    "9784781603032",
    "9784820717461",
    "9784478006658",
    "9784479771135",
    "9784822233396",
    "9784822740313",
    "9784471212674",
    "9784798116037",
    "9784798135991",
    "9784844364238",
    "9784798124285",
    "9784532490805",
    "9784048684118",
    "9784496040986",
    "9784810180084",
    "9784478008515",
    "9784756100917",
    "9784990432225",
    "9784766503708",
    "9784873115917",
    "9784532318710",
    "9784822248970",
    "9784478016312",
    "9784798117720",
    "9784478005538",
    "9784797350937",
    "9784839936471",
    "9784478331033",
    "9784478090237",
    "9784822247454",
    "9784822262785",
    "9784087202380",
    "9784774149608",
    "9784797372496",
    "9784048912174",
    "9784478020449",
    "9784478021477",
    "9784822273804",
    "9784757217690",
    "9784532317119",
    "9784344017115",
    "9784478017210",
    "9784833419499",
    "9784844371502",
    "9784534047571",
    "9784478410233",
    "9784478012932",
    "9784420310611",
    "9784000065122",
    "9784041104996",
    "9784799313114",
    "9784839938314",
    "9784797370751",
    "9784061385207",
    "9784774152943",
    "9784492681336",
    "9784813237051",
    "9784798127927",
    "9784844363880",
    "9784774151533",
    "9784798029139",
    "9784756136497",
    "9784774154893",
    "9784048707862",
    "9784798131115",
    "9784774124810",
    "9784756101624",
    "9784756131782",
    "9784121504890",
    "9784861007347",
    "9784501532000",
    "9784774154381",
    "9784798128450",
    "9784774172286",
    "9784798043159",
    "9784774173207",
    "9784774176543",
    "9784797376272",
    "9784774169835",
    "9784532490485",
    "9784862234926",
    "9784873116358",
    "9784774174419",
    "9784062578912",
    "9784798111926",
    "9784777517343",
    "9784774172361",
    "9784844337003",
    "9784798129471",
    "9784774173139",
    "9784798136431",
    "9784048662024",
    "9784873115658",
    "9784844336389",
    "9784774142296",
    "9784873116884",
    "9784774169316",
    "9784774167091",
    "9784774162058",
    "9784844336785",
    "9784774174235",
    "9784774176437",
    "9784873117287",
    "9784863541771",
    "9784873117256",
    "9784534053190",
    "9784274067938",
    "9784822279981",
    "9784844337768",
    "9784274201448",
    "9784274066986",
    "9784777517992",
    "9784873116082",
    "9784798135786",
    "9784839941871",
    "9784862462657",
    "9784774176734",
    "9784873116860",
    "9784774135663",
    "9784408111407",
    "9784817193605",
    "9784822250447",
    "9784844328544",
    "9784594065669",
    "9784798114415",
    "9784822268930",
    "9784774151434",
    "9784774145013",
    "9784873114934",
    "9784797386066",
    "9784873114828",
    "9784873115832",
    "9784798034225",
    "9784839948290",
    "9784798040899",
    "9784798028057",
    "9784800710222",
    "9784873116600",
    "9784534036551",
    "9784798105666",
    "9784798044095",
    "9784777518517",
    "9784569814636",
    "9784054063464",
    "9784054063471",
    "9784774146430",
    "9784900900585",
    "9784048660686",
    "9784847065576",
    "9784904807019",
    "9784822281106",
    "9784054063693",
    "9784056109467",
    "9784822285128",
    "9784774165233",
    "9784048910774",
    "9784774151847",
    "9784798023809",
    "9784873115689",
    "9784873115269",
    "9784899773429",
    "9784839945329",
    "9784774159393",
    "9784798122335",
    "9784774145808",
    "9784774162881",
    "9784774158136",
    "9784774150376",
    "9784434196478",
    "9784798123875",
    "9784798133805",
    "9784040674247",
    "9784873117096",
    "9784797332643",
    "9784822277154",
    "9784822271800",
    "9784621089514",
    "9784822282868",
    "9784062579506",
    "9784774178028",
    "9784774159713",
    "9784774163673",
    "9784774178660",
    "9784844339458",
    "9784798145037",
    "9784774178707",
    "9784479794967",
    "9784774179926",
    "9784873117607",
    "9784862761828",
    "9784844339267",
    "9784774163666",
    "9784873117645",
    "9784121505521",
    "9784798046143",
    "9784799102756",
    "9784798142418",
    "9784484111094",
    "9784046538956",
    "9784862463241",
    "9784844330844",
    "9784798125411",
    "9784774181240",
    "9784873114569",
    "9784798130606",
    "9784822251550",
    "9784798126258",
    "9784873113470",
    "9784894715653",
    "9784152095756",
    "9784794602817",
    "9784844365938",
    "9784621300374",
    "9784761270438",
    "9784797384765",
    "9784797384758",
    "9784492556931",
    "9784774173801",
    "9784048662031",
    "9784756246509",
    "9784766127423",
    "9784766128017",
    "9784905073413",
    "9784802610445",
    "9784862760852",
    "9784479795339",
    "9784839957025",
    "9784839953355",
    "9784798144450",
    "9784478025819",
    "9784584125205",
    "9784764905061",
    "9784822284657",
    "9784789014205",
    "9784873117669",
    "9784774142944",
    "9784873115894",
    "9784873117713",
    "9784140817049",
    "9784837957683",
    "9784480427762",
    "9784802510028",
    "9784861009785",
    "9784873117768",
    "9784797342512",
    "9784873116679",
    "9784320112414",
    "9784774183923",
    "9784274219153",
    "9784802510202",
    "9784844361138",
    "9784844361190",
    "9784798142494",
    "9784274219337",
    "9784320123533",
    "9784873117119",
    "9784873117218",
    "9784865940596",
    "9784756145024",
    "9784774164106",
    "9784873117300",
    "9784844336358",
    "9784478068441",
    "9784152096579",
    "9784798110660",
    "9784822239176",
    "9784774185347",
    "9784798129716",
    "9784905318194",
    "9784774187303",
    "9784873116686",
    "9784873117805",
    "9784873117584",
    "9784873117904",
    "9784774188195",
    "9784865940398",
    "9784798121963",
    "9784798131610",
    "9784774188652",
    "9784766129960",
    "9784130628396",
    "4910078990577",
    "9784048930567",
    "9784866250847",
    "9784022514707",
    "9784908686016",
    "9784908686009",
    "9784774148137",
    "9784274068768",
    "9784863541795",
    "9784274064067",
    "9784774163246",
    "9784774157375",
    "9784797380484",
    "9784798137148",
    "9784839959111",
    "9784873118024",
    "9784822255138",
    "9784873117782",
    "9784873118048",
    "9784865561647",
    "9784478102190",
    "9784873118062",
    "9784777520138",
    "9784774190563",
    "9784873117997",
    "9784774190877",
    "9784053032331",
    "9784053032348",
    "9784774191300",
    "9784839953553",
    "9784774143071",
    "9784873116211",
    "9784873117560",
    "9784774191294",
    "9784822277369",
    "9784873117386",
    "9784839960100",
    "9784274067556",
    "9784822237813",
    "9784873117522",
    "9784873118161",
    "4910201340972",
    "9784798143668",
    "9784873118178",
    "9784774192390",
    "9784048707879",
    "9784274217883",
    "9784797327038",
    "9784295002352",
    "9784774193830",
    "9784798115160",
    "9784802611145",
    "9784908686023",
    "9784822296544",
    "9784774194004",
    "9784862463876",
    "9784569832449",
    "9784873118154",
    "9784908686030",
    "9784873117911",
    "9784621300251",
    "9784295002574",
    "9784873118208",
    "9784774194332",
    "9784798048703",
    "9784774193533",
    "9784798153995",
    "9784798053769",
    "9784130633680",
    "9784774192185",
    "9784873118253",
    "4910058270286",
    "9784774193731",
    "9784774194141",
    "9784797395457",
    "9784800711427",
    "9784797392562",
    "9784761270995",
    "9784862762269",
    "9784534053428",
    "9784774173696",
    "9784798053660",
    "9784839961749",
    "9784822298937",
    "4910058270385",
    "9784774195544",
    "9784774196077",
    "9784822292270",
    "9784798155371",
    "4910058270484",
    "9784774196237",
    "9784844365013",
    "9784822247256",
    "9784478069783",
    "9784873118406",
    "9784873118352",
    "9784274219986",
    "4910889410189",
    "9784777520442",
    "4910889411179",
    "4910889431177",
    "9784774196886",
    "4910058270583",
    "9784774196473",
    "9784478300725",
    "9784478300596",
    "9784797395365",
    "9784833422291",
    "9784478102541",
    "9784873118277",
    "9784534050427",
    "9784532320171",
    "9784478502389",
    "9784798139616",
    "9784863541979",
    "9784478374498",
    "9784873115108",
    "9784774178721",
    "9784822277666",
    "9784774165226",
    "9784822251437",
    "9784152095428",
    "9784798051093",
    "9784798045870",
    "9784883353989",
    "9784799317570",
    "9784534045331",
    "9784502595509",
    "9784040669298",
    "9784478490525",
    "9784862762016",
    "9784802510417",
    "9784799318522",
    "9784502190513",
    "9784862762450",
    "9784478000496",
    "9784054063396",
    "9784904336809",
    "9784478028445",
    "9784478067451",
    "9784344911987",
    "9784822237622",
    "9784766125412",
    "9784798125732",
    "9784797387889",
    "9784502146619",
    "9784140884959",
    "9784774178172",
    "9784502486401",
    "9784798125268",
    "9784794423801",
    "9784861008535",
    "9784860639495",
    "9784844335351",
    "9784839960773",
    "9784797372212",
    "9784798141572",
    "9784797393101",
    "9784844336082",
    "9784798142661",
    "9784883379644",
    "9784802610254",
    "9784839950699",
    "9784797383300",
    "9784621066041",
    "9784797372960",
    "9784798022901",
    "9784844328964",
    "9784844328094",
    "9784883375004",
    "9784873117744",
    "9784433667566",
    "9784797362435",
    "9784774169248",
    "9784798125190",
    "9784865751109",
    "9784798117690",
    "9784534045843",
    "9784798134611",
    "9784798135465",
    "9784797371598",
    "9784797369380",
    "9784798128139",
    "9784274066139",
    "9784904807040",
    "9784274050732",
    "9784774187068",
    "9784774189673",
    "9784798114132",
    "9784800711489",
    "9784800710475",
    "9784774144665",
    "9784048913928",
    "9784797389821",
    "9784798134192",
    "9784774188485",
    "9784798141022",
    "9784274069215",
    "9784274066481",
    "9784844331094",
    "9784774123608",
    "9784904807002",
    "9784048661454",
    "9784048913911",
    "9784774146003",
    "9784873113913",
    "9784798033655",
    "9784774143965",
    "9784865940435",
    "9784839955786",
    "9784873115849",
    "9784873115122",
    "9784873114880",
    "9784873116730",
    "9784839960889",
    "9784048930581",
    "9784904807309",
    "9784822269999",
    "9784861009228",
    "9784756244482",
    "9784844363606",
    "9784844362586",
    "9784844364726",
    "9784756245892",
    "9784797388541",
    "9784756248404",
    "9784798132105",
    "9784774183213",
    "9784844365877",
    "9784844339632",
    "9784802610216",
    "9784766124521",
    "9784766126204",
    "9784774165677",
    "9784800711212",
    "9784844359791",
    "9784295000150",
    "9784798137315",
    "9784883378722",
    "9784883379477",
    "9784798140285",
    "9784798046778",
    "9784839936112",
    "9784797389036",
    "9784798140568",
    "9784798136967",
    "9784798122977",
    "9784863542327",
    "9784797386318",
    "9784865940329",
    "9784802510066",
    "9784839963699",
    "9784797384789",
    "9784798130842",
    "9784774169446",
    "4910058270682",
    "9784822283117",
    "9784797368277",
    "9784774196114",
    "9784048703673",
    "9784822271954",
    "9784844381266",
    "9784839963521",
    "9784797388640",
    "9784774141640",
    "9784774179933",
    "9784774196008",
    "9784800711977",
    "9784774197050",
    "9784798153353",
    "9781491943397",
    "9784844365174",
    "9784797393248",
    "9784774188836",
    "9784863541702",
    "9784798134543",
    "9784798128214",
    "9784774194639",
    "9784320023680",
    "4910058270781",
    "9784797377606",
    "9784774198514",
    "9784797392579",
    "9784839964566",
    "9784534052452",
    "9784839964580",
    "9784295003274",
    "9784822255749",
    "4910058270880",
    "9784040697291",
    "9784904807521",
    "9784774196862",
    "9784048930659",
    "9784908686047",
    "9784822224967",
    "9784774197067",
    "9784774192239",
    "9784873118222",
    "9784873118383",
    "9784797393163",
    "9784908686061",
    "9784774173443",
    "9784774198743",
    "9784798155128",
    "9784041071106",
    "9784894712874",
    "4910058270989",
    "9784774199436",
    "9784873118567",
    "9784478065792",
    "9784822298487",
    "9784774180007",
    "9784798157603",
    "9784873118550",
    "9784774198767",
    "9784297100339",
    "9784774192628",
    "9784822245641",
    "9784774196053",
    "9784990913052",
    "9784492533482",
    "9784822271787",
    "9784844332848",
    "4910058271085",
    "9784904807538",
    "9784297100919",
    "9784802611848",
    "9784873118482",
    "9784797382846",
    "4910058271184",
    "9784297101725",
    "9784774199382",
    "9784023317284",
    "9784800282439",
    "9784873118468",
    "9784798157825",
    "4910058271283",
    "9784295004806",
    "9784120050428",
    "4910058270194",
    "9784297103248",
    "9784873118413",
    "9784873118345",
    "9784798152028",
    "9784774149936",
    "9784839924027",
    "9784798156491",
    "4910052690196",
    "9784297100353",
    "9784480095251",
    "4910058270293",
    "9784873118642",
    "9784478039632",
    "9784534054852",
    "9784798157306",
    "9784774185927",
    "9784761273453",
    "9784274068850",
    "9784799323465",
    "9784297103583",
    "4910058270392",
    "9784297104405",
    "9784822289645",
    "9784297103828",
    "9784297104085",
    "9784863542228",
    "4910058270491",
    "9784297105334",
    "4910058270590",
    "9784798155456",
    "9784774192376",
    "9784863542778",
    "9784797398588",
    "9784873118758",
    "9784798157382",
    "9784822284930",
    "4910058270699",
    "9781680502541",
    "9784798039442",
    "4910058270798",
    "9784297106577",
    "9784839969370",
    "9784297106232",
    "9784802511193",
    "9784798161501",
    "4910058270897",
    "9784863542457",
    "9784873115573",
    "9784873118703",
    "9784297107277",
    "4910058270996",
    "9784797397406",
    "9784297107871",
    "9784000052443",
    "9784297107932",
    "9784621087862",
    "9784798128443",
    "9784822237509",
    "4910058271092",
    "9784798149776",
    "9781491943397",
    "9784873114095",
    "9784822298975",
    "9784797375718",
    "9784800711304",
    "9784797353686",
    "9784274064401",
    "9784274077708",
    "9784822255466",
    "9784844334668",
    "9784844364894",
    "9784844367093",
    "9784534046093",
    "9784774138640",
    "9784839918712",
    "9784797321944",
    "9784478106167",
    "9784802611695",
    "9784798119342",
    "9784785724948",
    "9784534041470",
    "9784766125276",
    "9784774185293",
    "9784797386677",
    "9784822258917",
    "9784774183671",
    "9784798157559",
    "9784822211981",
    "9784904899441",
    "9784048869577",
    "9784797396720",
    "9784798115825",
    "9784802611329",
    "9784797390537",
    "9784861007644",
    "9784774172958",
    "9784295005520",
    "9784802611732",
    "9784798026329",
    "9784774137100",
    "9784774180663",
    "9784798029597",
    "9784774194189",
    "9784862670908",
    "9784797351422",
    "9784800710055",
    "9784797359220",
    "9784756249166",
    "9784906033485",
    "9784816365300",
    "9784799106242",
    "9784802612128",
    "9784334039967",
    "9784798053486",
    "9784798158341",
    "9784798103853",
    "9784798155364",
    "9784295403388",
    "9784839960216",
    "4910059691196",
    "9784815601126",
    "9784873118864",
    "9784863542884",
    "9784297109059",
    "4910058271191",
    "9784798058757",
    "9784822289911",
    "9784873118888",
    "9784909044211",
    "9784837926528",
]
OPENBD_URL = "https://api.openbd.jp/v1/get?isbn="


def main():
    scrapbox_dict = {}
    scrapbox_dict["name"] = PROJECT_NAME
    scrapbox_dict["displayName"] = PROJECT_NAME
    pages = []
    for isbn in ISBNs:
        api_url = OPENBD_URL + isbn
        try:
            response = requests.get(api_url)
            if response.text:
                response_dict = json.loads(response.text)
                summary = response_dict[0]["summary"]
                title = summary["title"]
                publisher = summary["publisher"]
                cover = summary["cover"]
                # 著者名は一人分だけ取り出し、"／著"は削除する
                author = re.sub(r"／著.*", "", summary["author"])

                page = {}
                page["title"] = title
                lines = []
                lines.append("title: {}".format(title))
                lines.append("[{}]".format(cover))
                lines.append("isbn: {}".format(isbn))
                lines.append("author: [{}]".format(author))
                lines.append("publisher: [{}]".format(publisher))
                page["lines"] = lines
                pages.append(page)
            else:
                pass
        except:
            pass

    scrapbox_dict["pages"] = pages
    f = open("scrapbox_import.json", "w")
    json.dump(
        scrapbox_dict, f, ensure_ascii=False, indent=4, sort_keys=True, separators=(",", ": ")
    )


if __name__ == "__main__":
    main()
